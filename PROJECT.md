### Roach Project Documentation
This document provides a comprehensive overview of the Roach programming language's project structure, detailing the organization of its directories and the purpose of its Go source files.

#### Project Overview
Roach is a feature-rich, C-style toy language interpreter written in Go. It draws inspiration from languages like Ruby, Python, Perl, and C#. It supports procedural, functional, and object-oriented programming paradigms.

Key features include:
* A class system with properties, indexers, and operator overloading.
* Asynchronous programming with async/await.
* A powerful LINQ-inspired query syntax.
* First-class functions with variadic parameters and default values.
* A rich set of built-in data types: int, uint, float, bool, array, tuple, and hash.
* The ability to import and use native Go packages.
* An integrated service feature for building RESTful web services.

The project also includes several command-line tools: a REPL, a code formatter, a syntax highlighter, and a documentation generator (mdoc).

---

### Directory & File Structure
Below is a detailed breakdown of the project's Go source files and their objectives.

```
.
├── ast
│   └── ast.go
├── cmd
│   ├── fmt
│   │   └── fmt.go
│   ├── highlight
│   │   └── highlight.go
│   └── mdoc
│       └── mdoc.go
├── docs
│   ├── css.go
│   ├── doc.go
│   ├── doc.png
│   ├── README.md
│   └── template.go
├── eval
│   ├── array.go
│   ├── builtin.go
│   ├── channel.go
│   ├── class.go
│   ├── csv.go
│   ├── debugger.go
│   ├── decimal.go
│   ├── errors.go
│   ├── eval.go
│   ├── file.go
│   ├── filepath.go
│   ├── flag.go
│   ├── fmt.go
│   ├── goobject.go
│   ├── hash.go
│   ├── http.go
│   ├── json.go
│   ├── levenshtein.go
│   ├── linq.go
│   ├── list.go
│   ├── log.go
│   ├── math.go
│   ├── net.go
│   ├── object.go
│   ├── optional.go
│   ├── os.go
│   ├── regex.go
│   ├── scope.go
│   ├── service.go
│   ├── sort.go
│   ├── sql.go
│   ├── string.go
│   ├── sync.go
│   ├── template.go
│   ├── time.go
│   ├── tuple.go
│   └── unicode.go
├── formatter
│   └── formatter.go
├── highlight
│   ├── consoleHighlighter.go
│   ├── highlight.go
│   └── htmlHighlighter.go
├── lexer
│   ├── lexer.go
├── main.go
├── message
│   └── message.go
├── parser
│   └── parser.go
├── README.md
├── repl
│   └── repl.go
└── token
    ├── Position.go
    └── token.go
```

---

### Root Directory (/)
*   **`main.go`**: The main entry point for the Roach interpreter. It parses command-line arguments to decide whether to run a script, start the REPL, or launch a debugging session. It is also responsible for registering native Go library functions (from packages like `fmt`, `os`, `time`, `regexp`, etc.) into the Roach global scope, enabling interoperability.

---

### `ast/`
This directory defines the structure of the code after it has been parsed.

*   **`ast.go`**: Contains the Go type definitions for all nodes in the Abstract Syntax Tree (AST). Every language construct (like an `if` expression, a function literal, or an integer) has a corresponding struct that implements the `Node`, `Statement`, or `Expression` interfaces. The parser builds this tree, and the evaluator walks it.

---

### `cmd/`
This directory contains the source code for the various command-line tools provided with Roach.

*   **`cmd/fmt/fmt.go`**: A code formatting tool for the Roach language, similar to `gofmt`. It parses Roach source code and prints the formatted result to standard output.
*   **`cmd/highlight/highlight.go`**: A syntax highlighting tool that can output highlighted Roach code to either the console (with ANSI color codes) or as a self-contained HTML file.
*   **`cmd/mdoc/mdoc.go`**: The main entry point for the `mdoc` documentation generator. It parses command-line flags, reads Roach source files, and uses the `docs` package to generate documentation in either Markdown or HTML format.

---

### `docs/`
This directory contains the logic for the documentation generation system.

*   **`css.go`**: Provides several built-in CSS themes (e.g., GitHub, Zenburn, Atom Dark) that can be embedded into the HTML documentation generated by `mdoc`.
*   **`doc.go`**: The core of the documentation generator. It defines structs to represent the documented code (`File`, `Classes`, `Function`). It parses docstrings (`@param`, `@return`, `@example`) from the AST, generates Markdown, and uses the GitHub Markdown API to produce HTML. It also performs post-processing to add a table of contents and "show source" functionality.
*   **`template.go`**: Contains the `text/template` definitions used by `doc.go` to structure and render the final Markdown documentation.

---

### `eval/`
This is the heart of the interpreter, responsible for executing the code represented by the AST.

*   **`eval.go`**: Contains the main `Eval` function, which is a tree-walking interpreter. It recursively traverses the AST, evaluating each node and producing Roach objects as results. It handles the logic for all language constructs like loops, conditionals, and expressions.
*   **`object.go`**: Defines all the core data types (objects) in the Roach language, such as `Integer`, `String`, `Array`, `Hash`, `Function`, `Class`, etc. Each type implements the `Object` interface. This file also initializes all the standard library modules.
*   **`builtin.go`**: Defines and registers all the built-in functions available globally in Roach, such as `len()`, `println()`, `type()`, `abs()`, and `range()`.
*   **`errors.go`**: Defines all the error objects and constant error messages used throughout the interpreter, providing consistent and descriptive error reporting.
*   **`scope.go`**: Implements the `Scope` object, which manages variable storage and resolution. It handles lexical scoping, allowing for nested functions and closures.
*   **`array.go`**: Implements the `Array` object and all of its built-in methods (e.g., `push`, `pop`, `slice`).
*   **`channel.go`**: Implements the `ChanObject` for concurrency, providing `send`, `recv`, and `close` capabilities, mimicking Go's channels.
*   **`class.go`**: Implements the entire object-oriented system, including the `Class` and `ObjectInstance` types. It manages inheritance, properties (getters/setters), indexers, and method resolution.
*   **`csv.go`**: Implements the built-in `csv` module for reading and writing CSV files.
*   **`debugger.go`**: Implements the interactive command-line debugger. It handles breakpoints, stepping through code (`next`, `continue`), and evaluating expressions in the current scope.
*   **`decimal.go`**: Implements the `decimal` module for arbitrary-precision fixed-point arithmetic, acting as a wrapper around a Go decimal library.
*   **`file.go`**: Implements the `FileObject` for file I/O operations, wrapping Go's `os.File`.
*   **`filepath.go`**: Implements the built-in `filepath` module, providing path manipulation utilities.
*   **`flag.go`**: Implements the built-in `flag` module, allowing Roach scripts to parse their own command-line options.
*   **`fmt.go`**: Implements the built-in `fmt` module, providing `printf` and `sprintf` functionality.
*   **`goobject.go`**: A key file for Go interoperability. It handles the wrapping of native Go types and functions into `GoObject`s, allowing them to be used within the Roach runtime.
*   **`hash.go`**: Implements the `Hash` object, which is an ordered map. It provides methods like `keys`, `values`, `push`, and `pop`.
*   **`http.go`**: Implements the built-in `http` module, providing constants and functions for HTTP-related tasks.
*   **`json.go`**: Implements the built-in `json` module for marshaling and unmarshaling JSON data.
*   **`levenshtein.go`**: Provides the Levenshtein distance algorithm, used for suggesting corrections for typos in variable or function names ("Did you mean...?").
*   **`linq.go`**: Implements the powerful Language-Integrated Query (LINQ) feature, allowing for declarative querying over collections, files, and other data sources.
*   **`list.go`**: Implements a doubly-linked list object, wrapping Go's `container/list`.
*   **`log.go`**: Implements the built-in `log` module for logging.
*   **`math.go`**: Implements the built-in `math` module, exposing mathematical constants and functions.
*   **`net.go`**: Implements the built-in `net` module for networking operations like TCP and UDP.
*   **`optional.go`**: Implements the `Optional` type, similar to Java 8's Optional, for handling values that may be `nil`.
*   **`os.go`**: Implements the built-in `os` module, providing access to operating system functionality.
*   **`regex.go`**: Implements the built-in `regexp` module for regular expression operations.
*   **`service.go`**: Implements the `service` language construct for creating RESTful web services. It uses `gorilla/mux` internally for powerful routing and handles HTTP requests and responses.
*   **`sort.go`**: Implements the built-in `sort` module.
*   **`sql.go`**: Implements the built-in `sql` module, providing a low-level interface for interacting with SQL databases.
*   **`string.go`**: Implements the `String` object and its built-in methods (e.g., `upper`, `lower`, `split`).
*   **`sync.go`**: Implements the built-in `sync` module, providing concurrency primitives like `Mutex` and `WaitGroup`.
*   **`template.go`**: Implements the built-in `template` module for text and HTML templating.
*   **`time.go`**: Implements the built-in `time` module for time-related operations.
*   **`tuple.go`**: Implements the immutable `Tuple` object and its methods.
*   **`unicode.go`**: Implements the built-in `unicode` module.

---

### `formatter/`
*   **`formatter.go`**: Contains the core logic for the Roach code formatter. It traverses the AST and pretty-prints it according to a consistent style.

---

### `highlight/`
*   **`highlight.go`**: Defines the `Highlighter` interface and common logic for syntax highlighting.
*   **`consoleHighlighter.go`**: An implementation of `Highlighter` that outputs text with ANSI escape codes for coloring in a terminal.
*   **`htmlHighlighter.go`**: An implementation of `Highlighter` that outputs an HTML document with `<span>` tags for color styling.

---

### `lexer/`
*   **`lexer.go`**: The lexical analyzer (or scanner). It takes the raw Roach source code as input and converts it into a sequence of tokens (e.g., identifiers, keywords, operators).

---

### `message/`
*   **`message.go`**: Defines a simple message passing system used by the debugger to communicate between the evaluator and the debugger's user interface.

---

### `parser/`
*   **`parser.go`**: The syntactic analyzer. It takes the stream of tokens from the lexer and builds an Abstract Syntax Tree (AST) that represents the grammatical structure of the code. It defines operator precedence and handles parsing of all language constructs.

---

### `repl/`
*   **`repl.go`**: Implements the Read-Eval-Print Loop (REPL). It provides an interactive command-line interface for the Roach interpreter, complete with syntax highlighting and history.

---

### `token/`
*   **`token.go`**: Defines all the possible token types in the Roach language, from keywords (`if`, `fn`) and operators (`+`, `==`) to literals (`INT`, `STRING`).
*   **`Position.go`**: Defines the `Position` struct, which is used to track the filename, line number, and column of every token for accurate error reporting.
